{% extends "base.html" %} 
{% block title %} AI Page 
{% endblock %} 
{% block body %}
<div class="col-6 offset-3 my-4">
    <h3 class="text-white mb-3">Ornamenti AI</h3>
    
    <div id="chatBox" class="mb-3 p-3 border rounded bg-dark" style="height: 400px; overflow-y: auto; display: flex; flex-direction: column;">
        {% for message in chat_history %}
            {% if message.role != 'system' %} <div class="mb-3 {{ 'text-end' if message.role == 'user' else '' }}">
                    <span class="badge {{ 'bg-danger' if message.role == 'user' else 'bg-primary' }}">
                        {{ 'You' if message.role == 'user' else 'Ornamenti' }}
                    </span>
                    <p class="text-white p-2 rounded mt-1 shadow-sm" style="background: #343a40; display: inline-block; max-width: 80%; text-align: left;">
                        {{ message.content }}
                    </p>
                </div>
            {% endif %}
        {% endfor %}
    </div>

    <form method="post">
        {{ form.hidden_tag() }}
        <div class="input-group">
            {{ form.question(class="form-control", placeholder="Ask about art...") }}
            {{ form.submit(class="btn btn-danger") }}
        </div>
    </form>
    
    <div class="mt-3 text-center">
        <a href="{{ url_for('clear_chat') }}" class="btn btn-sm btn-outline-secondary">Reset Conversation</a>
    </div>
</div>

<script>
    var chatBox = document.getElementById("chatBox");
    chatBox.scrollTop = chatBox.scrollHeight;
</script>
{% endblock %}

